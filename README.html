<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aitrader / Aitradex - Build, Test, Run</title>
    <style>
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        line-height: 1.5;
        margin: 32px;
        color: #0f172a;
      }
      code,
      pre {
        font-family: "Fira Code", Menlo, Consolas, monospace;
      }
      pre {
        background: #f8fafc;
        padding: 12px 16px;
        border-radius: 8px;
        overflow-x: auto;
      }
      h1,
      h2,
      h3 {
        color: #1e293b;
      }
      .callout {
        background: #eff6ff;
        border-left: 4px solid #3b82f6;
        padding: 12px 16px;
        border-radius: 8px;
      }
      ul {
        margin-top: 4px;
      }
    </style>
  </head>
  <body>
    <h1>Aitrader / Aitradex</h1>
    <p>
      This repository contains the Spring Boot backend (<code>aitradex-service</code>)
      and the Angular UI (<code>aitradex-ui</code>).
    </p>

    <h2>Prerequisites</h2>
    <ul>
      <li>Java 21 (for the Spring Boot service)</li>
      <li>Maven 3.9+</li>
      <li>Node.js 18+ and npm (for the Angular UI)</li>
      <li>Docker (optional, for containerized runs)</li>
    </ul>

    <h2>Build</h2>
    <h3>Full workspace build</h3>
    <pre><code>mvn -f aitradex/pom.xml clean package</code></pre>

    <h3>Backend only</h3>
    <pre><code>mvn -f aitradex/aitradex-service/pom.xml clean package</code></pre>

    <h3>UI only</h3>
    <pre><code>cd aitradex/aitradex-ui
npm install
npm run build</code></pre>

    <h2>Test</h2>
    <h3>Run all backend tests</h3>
    <pre><code>mvn -f aitradex/aitradex-service/pom.xml test</code></pre>

    <h3>Run a single test class</h3>
    <pre><code>mvn -f aitradex/aitradex-service/pom.xml -Dtest=RiskControllerTest test</code></pre>

    <h3>UI tests</h3>
    <pre><code>cd aitradex/aitradex-ui
npm test</code></pre>

    <h2>Run</h2>
    <h3>Option 1: Docker Compose (backend + UI + database)</h3>
    <pre><code>cd aitradex
./mvnw -q -DskipTests package
npm --prefix aitradex-ui install
npm --prefix aitradex-ui run build

# Build and run containers

docker compose up --build</code></pre>

    <div class="callout">
      <p><strong>Access:</strong></p>
      <ul>
        <li>UI: <a href="http://localhost:4200">http://localhost:4200</a></li>
        <li>API: <a href="http://localhost:8080">http://localhost:8080</a></li>
        <li>
          Swagger UI:
          <a href="http://localhost:8080/api/swagger-ui.html">http://localhost:8080/api/swagger-ui.html</a>
        </li>
      </ul>
    </div>

    <h3>Option 2: Local backend + local database</h3>
    <ol>
      <li>
        Start PostgreSQL locally (or use the Docker command below):
        <pre><code>docker run --name aitradex-postgres -e POSTGRES_DB=aitradex -e POSTGRES_USER=aitradex -e POSTGRES_PASSWORD=aitradex -p 5432:5432 -d postgres:16-alpine</code></pre>
      </li>
      <li>
        Run the Spring Boot service:
        <pre><code>mvn -f aitradex/aitradex-service/pom.xml spring-boot:run -Dspring-boot.run.profiles=dev</code></pre>
      </li>
    </ol>

    <div class="callout">
      <p><strong>Access:</strong></p>
      <ul>
        <li>API: <a href="http://localhost:8080">http://localhost:8080</a></li>
        <li>
          Swagger UI:
          <a href="http://localhost:8080/api/swagger-ui.html">http://localhost:8080/api/swagger-ui.html</a>
        </li>
      </ul>
    </div>

    <h3>Option 3: Local UI (Angular dev server)</h3>
    <pre><code>cd aitradex/aitradex-ui
npm install
npm start</code></pre>

    <div class="callout">
      <p><strong>Access:</strong></p>
      <ul>
        <li>UI: <a href="http://localhost:4200">http://localhost:4200</a></li>
      </ul>
    </div>

    <h3>Option 4: Run backend and UI separately (no Docker)</h3>
    <ol>
      <li>Start the backend (see Option 2).</li>
      <li>Start the UI dev server (see Option 3).</li>
      <li>Configure a token in the UI (Configuration page) if your API endpoints require JWT auth.</li>
    </ol>

    <h2>Configuration</h2>
    <ul>
      <li>
        Backend configuration lives in
        <code>aitradex/aitradex-service/src/main/resources/application.yml</code>.
      </li>
      <li>
        Docker Compose configuration is in <code>aitradex/docker-compose.yml</code>.
      </li>
    </ul>
  </body>
</html>
