spring:
  application:
    name: aitradex-service
app:
  cors:
    allowed-origins: "*"
  security:
    jwt:
      secret: ${APP_JWT_SECRET:dev-insecure-jwt-secret-change-me-please}
      issuer: ${APP_JWT_ISSUER:aitradex}
      audience: ${APP_JWT_AUDIENCE:aitradex-ui}
      clock-skew-seconds: ${APP_JWT_CLOCK_SKEW_SECONDS:60}
  uploads:
    directory: ${APP_UPLOADS_DIRECTORY:./data/uploads}
    max-size-mb: ${APP_UPLOADS_MAX_SIZE_MB:25}
    max-validation-errors: ${APP_UPLOADS_MAX_VALIDATION_ERRORS:50}
  market-data:
    default-source: ${APP_MARKET_DATA_DEFAULT_SOURCE:quote-snapshots}
    cache-ttl: ${APP_MARKET_DATA_CACHE_TTL:30s}
    cache-evict-interval-ms: ${APP_MARKET_DATA_CACHE_EVICT_MS:300000}
  stop-loss:
    poll-interval-ms: ${APP_STOP_LOSS_POLL_MS:60000}
    source: ${APP_STOP_LOSS_SOURCE:quote-snapshots}
  snapshots:
    poll-interval-ms: ${APP_SNAPSHOT_POLL_MS:300000}
  datasource:
    url: jdbc:postgresql://localhost:5432/aitradex
    username: aitradex
    password: aitradex
  jpa:
    hibernate:
      ddl-auto: none
    open-in-view: false
    properties:
      hibernate:
        format_sql: true
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.yaml

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health, info
  endpoint:
    health:
      show-details: when_authorized

springdoc:
  api-docs:
    path: /api/docs
  swagger-ui:
    path: /api/swagger-ui.html

logging:
  level:
    root: INFO
    org.springframework.security: INFO

---
spring:
  config:
    activate:
      on-profile: dev
  datasource:
    url: jdbc:postgresql://localhost:5432/aitradex
    username: aitradex
    password: aitradex
  liquibase:
    contexts: dev

logging:
  level:
    org.hibernate.SQL: DEBUG
    org.springframework: INFO

---
spring:
  config:
    activate:
      on-profile: test
  datasource:
    url: jdbc:postgresql://localhost:5432/aitradex_test
    username: aitradex
    password: aitradex
  liquibase:
    contexts: test

logging:
  level:
    root: WARN

---
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    url: jdbc:postgresql://localhost:5432/aitradex
    username: ${POSTGRES_USER:aitradex}
    password: ${POSTGRES_PASSWORD:aitradex}
  liquibase:
    contexts: prod

server:
  port: ${PORT:8080}
management:
  endpoints:
    web:
      exposure:
        include: health, info
